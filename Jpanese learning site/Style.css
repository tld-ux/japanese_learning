/* ==================================================
   Japanese-Themed Upgrade — Drop-in CSS (no HTML changes)
   Keeps your existing classes/selectors and enhances styles
   ================================================== */

/* ---- Global tokens ---- */
:root {
  /* Existing tokens (kept) */
  --font: "FOT-Fafo Std","Fafo Sans","Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic","Meiryo",sans-serif;
  --text: #111;
  --accent: #350303ea;
  --card-bg: rgba(204, 200, 200, 0.582);

  /* New theme tokens (Japanese materials) */
  --ink: #0f0f0f;
  --indigo: #23395b;
  --indigo-2: #2c3e66;
  --rice: #faf6ec;         /* washi/rice-paper base */
  --paper: #f4efe3;
  --vermilion: #b71c1c;    /* 深紅 */
  --gold: #c9a227;         /* 金継ぎ */
  --shadow: 0 10px 28px rgba(0,0,0,.08);
  --radius: 16px;
  --gap: clamp(.75rem, 2vw, 1.25rem);
}

/* Optional dark theme (works if something sets html[data-theme="dark"]) */
html[data-theme="dark"] {
  --text: #eaeaea;
  --card-bg: rgba(24, 26, 28, 0.6);
  --indigo: #3a5c99;
  --indigo-2: #274b83;
  --vermilion: #ff5a4d;
  --rice: #0b0d10;
  --paper: #0f1216;
}

/* ---- Base / background ---- */
* { box-sizing: border-box; }
html, body { height: 100%; }

/* Fixed background (kept) — improved with subtle washi + wave tint */
body {
  margin: 0;
  font-family: var(--font);
  color: var(--text);
  background:
    radial-gradient(1200px 600px at 50% -220px, rgba(201,162,39,.10), transparent 60%),
    linear-gradient(180deg, var(--rice), var(--paper)),
    url("images/lightmodebg.jpg") center/100% auto fixed no-repeat;
  transition: background 0.4s ease, color .2s ease;
}

/* Decorative kanagawa-style wave at the very top (no HTML change) */
body::before {
  content: "";
  position: fixed;
  inset: 0 0 auto 0;
  height: 18px;
  z-index: 1;
  background:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='18' viewBox='0 0 160 18'><path fill='%2323395b' d='M0,8c8,8,24,8,32,0s24-8,32,0s24,8,32,0s24-8,32,0s24,8,32,0v10H0z'/></svg>")
    repeat-x top left / 160px 18px;
  filter: drop-shadow(0 4px 0 rgba(0,0,0,.04));
  pointer-events: none;
}

/* Paragraph helpers (kept) */
p { text-align: left; }
p.centered { text-align: center; }
p.right { text-align: right; }
p.block { display: inline-block; }

/* ---- Page wrapper ---- */
.page {
  min-height: 150vh;
  padding: clamp(16px, 2.5vw, 24px);
  max-width: 1200px;
  margin: 0 auto;
}

/* ---- Card styles ---- */
.card {
  background: linear-gradient(180deg, rgba(255,255,255,.75), var(--card-bg));
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: var(--radius);
  padding: clamp(14px, 2.5vw, 18px);
  margin: 14px auto;
  max-width: 900px;
  box-shadow: var(--shadow);
  position: relative;
  overflow: hidden;
}

/* Subtle “kintsugi” seam accent on cards */
.card::after {
  content: "";
  position: absolute;
  inset: -2px auto -2px -2px;
  width: 6px;
  background:
    linear-gradient(180deg, transparent 0%, var(--gold) 30%, transparent 60%);
  opacity: .8;
  filter: drop-shadow(0 0 2px rgba(201,162,39,.35));
  border-radius: 8px;
}

/* Lighter glassy paper panel */
.invisicard {
  background:
    radial-gradient(800px 400px at 120% -40%, rgba(201,162,39,.14), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.45));
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: var(--radius);
  padding: clamp(14px, 2.5vw, 18px);
  margin: 14px auto;
  max-width: 1100px;
  box-shadow: var(--shadow);
}

/* Tall scroller panels */
.tall-card {
  background: linear-gradient(180deg, rgba(255,255,255,.8), var(--card-bg));
  padding: 16px;
  margin: 10px;
  border-radius: var(--radius);
  border: 1px solid rgba(0,0,0,0.08);
  max-width: 420px;
  min-height: 220px;
  height: auto;
  overflow: auto;
  box-shadow: var(--shadow);
}

/* ---- Typography ---- */
h1, h2 {
  color: var(--indigo);
  margin-top: 0;
  letter-spacing: .02em;
}

h1 {
  font-size: clamp(1.6rem, 3.2vw, 2.2rem);
  line-height: 1.15;
  /* Brush-stroke underline via gradient */
  background:
    linear-gradient( to right, rgba(183,28,28,.35), rgba(183,28,28,0) 70%);
  background-repeat: no-repeat;
  background-size: 100% .18em;
  background-position: 0 95%;
  padding-bottom: .1em;
}

h2 {
  font-size: clamp(1.2rem, 2.6vw, 1.6rem);
  line-height: 1.25;
}

a {
  color: var(--vermilion);
  text-underline-offset: 2px;
  text-decoration-thickness: 1.5px;
}
a:hover {
  color: #8e1515;
  text-decoration-thickness: 2px;
}

/* ---- Image + text blocks ---- */
.image-text {
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  gap: 20px;
  margin: 20px auto;
  max-width: 1000px;
}
.image-text img {
  max-width: 350px;
  height: auto;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: var(--shadow);
  background:
    radial-gradient(100% 100% at 20% 20%, rgba(201,162,39,.25), transparent 60%);
}

/* ---- Columns / Rows (keeps your .row/.column HTML) ---- */
/* Modern layout with graceful fallback for old floats */
.row {
  display: flex;
  flex-wrap: wrap;
  gap: var(--gap);
  align-items: stretch;
}
/* Existing float fallback remains if a browser ignores flex */
.column {
  float: none;
  width: auto;
  flex: 1 1 300px;      /* 2 columns on medium, 1 on small */
  min-width: 260px;
}
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* ---- Micro-interactions ---- */
.card, .invisicard, .tall-card {
  transition: transform .18s ease, box-shadow .22s ease, border-color .22s ease;
}
.card:hover, .invisicard:hover, .tall-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 34px rgba(0,0,0,.12);
}

/* Optional inline accent (can be used anywhere): <span class="pill">新</span> */
.pill {
  display: inline-block;
  padding: .25rem .6rem;
  border-radius: 999px;
  background: #fff;
  border: 1px solid rgba(0,0,0,.06);
  box-shadow: var(--shadow);
  color: var(--indigo);
  font-size: .85rem;
  letter-spacing: .04em;
}

/* ---- Responsive tweaks ---- */
@media (max-width: 1024px) {
  .page { padding: clamp(14px, 2.5vw, 18px); }
}
@media (max-width: 560px) {
  h1 { font-size: clamp(1.4rem, 6vw, 1.8rem); }
  h2 { font-size: clamp(1.05rem, 5vw, 1.35rem); }
  .image-text { flex-direction: column; }
}

/* ---- Print (clean) ---- */
@media print {
  body::before { display: none !important; }
  .card, .invisicard, .tall-card { box-shadow: none; border-color: #ccc; }
}
